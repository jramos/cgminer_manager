#miner-pool
  %h2 Miner Status

  %table(cellpadding="0" cellspacing="0")
    %thead
      %th Host
      %th GH/s(5s)
      %th GH/s(avg)
      %th Devices

    %tbody
      - @miner_pool.miners.each_with_index do |miner, index|
        - @summary[:ghs_5s] << miner.summary[:ghs_5s]
        - @summary[:ghs_avg] << miner.summary[:ghs_av]

        %tr
          %td
            = link_to miner.host + ':' + miner.port.to_s, miner_url(index)
          %td= miner.summary[:ghs_5s]
          %td= miner.summary[:ghs_av]
          %td
            %table(cellpadding="0" cellspacing="0")
              %thead
                %th Name
                %th Status
                %th Elapsed
                %th Temp
                %th Error
              %tbody
                - miner.devs.each_with_index do |device, index|
                  - @summary[:error_rate]  << device[:'device_hardware%']
                  - @summary[:temperature] << device[:temperature]
                  - @summary[:uptime]      << device[:device_elapsed]

                  %tr
                    %td= device[:name] + index.to_s
                    %td= device[:status]
                    %td= (device[:device_elapsed] / 60).to_s + ' min'
                    %td= device[:temperature].to_s + ' C'
                    %td= device[:'device_hardware%'].to_s + '%'

                  - if chain_stats = get_chain_stats_for(miner, device[:name]+index.to_s)
                    - 1.upto(4) do |i|
                      - status = chain_stats.send(:[], :"chain_acs#{i}") rescue nil
                      - next if status.empty?

                      %tr
                        %td= "ACS#{(i - 1).to_s}"
                        %td(colspan="4" class="text-center")= status